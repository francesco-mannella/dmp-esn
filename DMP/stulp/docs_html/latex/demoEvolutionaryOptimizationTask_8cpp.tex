\hypertarget{demoEvolutionaryOptimizationTask_8cpp}{\subsection{demo\+Evolutionary\+Optimization\+Task.\+cpp File Reference}
\label{demoEvolutionaryOptimizationTask_8cpp}\index{demo\+Evolutionary\+Optimization\+Task.\+cpp@{demo\+Evolutionary\+Optimization\+Task.\+cpp}}
}


Demonstrates how to run an evolution strategy to optimize the parameters of a quadratic function, implemented as a Task and Task\+Solver.  


{\ttfamily \#include \char`\"{}bbo/\+Task.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/\+Task\+Solver.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/run\+Evolutionary\+Optimization.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/\+Experiment\+B\+B\+O.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/\+Distribution\+Gaussian.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/updaters/\+Updater\+Mean.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/updaters/\+Updater\+Covar\+Decay.\+hpp\char`\"{}}\\*
{\ttfamily \#include \char`\"{}bbo/updaters/\+Updater\+Covar\+Adaptation.\+hpp\char`\"{}}\\*
{\ttfamily \#include $<$iomanip$>$}\\*
{\ttfamily \#include $<$fstream$>$}\\*
{\ttfamily \#include $<$eigen3/\+Eigen/\+Core$>$}\\*
Include dependency graph for demo\+Evolutionary\+Optimization\+Task.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{demoEvolutionaryOptimizationTask_8cpp__incl}
\end{center}
\end{figure}
\subsubsection*{Classes}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classDemoTaskApproximateQuadraticFunction}{Demo\+Task\+Approximate\+Quadratic\+Function}
\begin{DoxyCompactList}\small\item\em The task is to choose the parameters a and c such that the function $ y = a*x^2 + c $ best matches a set of target values y\+\_\+target for a set of input values x. \end{DoxyCompactList}\item 
class \hyperlink{classDemoTaskSolverApproximateQuadraticFunction}{Demo\+Task\+Solver\+Approximate\+Quadratic\+Function}
\begin{DoxyCompactList}\small\item\em The task solver tunes the parameters a and c such that the function $ y = a*x^2 + c $ best matches a set of target values y\+\_\+target for a set of input values x. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \hyperlink{demoEvolutionaryOptimizationTask_8cpp_a8dd69e1c4b8036ab6c2b6f386fe5b6bc}{target\+Function} (double a, double c, const Vector\+Xd \&inputs, Vector\+Xd \&outputs)
\begin{DoxyCompactList}\small\item\em Target function $ y = a*x^2 + c $. \end{DoxyCompactList}\item 
int \hyperlink{demoEvolutionaryOptimizationTask_8cpp_a4c740be97d066078bad8e3997193c673}{main} (int n\+\_\+args, char $\ast$args\mbox{[}$\,$\mbox{]})
\begin{DoxyCompactList}\small\item\em Main function. \end{DoxyCompactList}\end{DoxyCompactItemize}


\subsubsection{Detailed Description}
Demonstrates how to run an evolution strategy to optimize the parameters of a quadratic function, implemented as a Task and Task\+Solver. 

\begin{DoxyAuthor}{Author}
Freek Stulp
\end{DoxyAuthor}
This file is part of Dmp\+Bbo, a set of libraries and programs for the black-\/box optimization of dynamical movement primitives. Copyright (C) 2014 Freek Stulp, E\+N\+S\+T\+A-\/\+Paris\+Tech

Dmp\+Bbo is free software\+: you can redistribute it and/or modify it under the terms of the G\+N\+U Lesser General Public License as published by the Free Software Foundation, either version 2 of the License, or (at your option) any later version.

Dmp\+Bbo is distributed in the hope that it will be useful, but W\+I\+T\+H\+O\+U\+T A\+N\+Y W\+A\+R\+R\+A\+N\+T\+Y; without even the implied warranty of M\+E\+R\+C\+H\+A\+N\+T\+A\+B\+I\+L\+I\+T\+Y or F\+I\+T\+N\+E\+S\+S F\+O\+R A P\+A\+R\+T\+I\+C\+U\+L\+A\+R P\+U\+R\+P\+O\+S\+E. See the G\+N\+U Lesser General Public License for more details.

You should have received a copy of the G\+N\+U Lesser General Public License along with Dmp\+Bbo. If not, see \href{http://www.gnu.org/licenses/}{\tt http\+://www.\+gnu.\+org/licenses/}. 

Definition in file \hyperlink{demoEvolutionaryOptimizationTask_8cpp_source}{demo\+Evolutionary\+Optimization\+Task.\+cpp}.



\subsubsection{Function Documentation}
\hypertarget{demoEvolutionaryOptimizationTask_8cpp_a8dd69e1c4b8036ab6c2b6f386fe5b6bc}{\index{demo\+Evolutionary\+Optimization\+Task.\+cpp@{demo\+Evolutionary\+Optimization\+Task.\+cpp}!target\+Function@{target\+Function}}
\index{target\+Function@{target\+Function}!demo\+Evolutionary\+Optimization\+Task.\+cpp@{demo\+Evolutionary\+Optimization\+Task.\+cpp}}
\paragraph[{target\+Function}]{\setlength{\rightskip}{0pt plus 5cm}void target\+Function (
\begin{DoxyParamCaption}
\item[{double}]{a, }
\item[{double}]{c, }
\item[{const Vector\+Xd \&}]{inputs, }
\item[{Vector\+Xd \&}]{outputs}
\end{DoxyParamCaption}
)}}\label{demoEvolutionaryOptimizationTask_8cpp_a8dd69e1c4b8036ab6c2b6f386fe5b6bc}


Target function $ y = a*x^2 + c $. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em a} & a in $ y = a*x^2 + c $ \\
\hline
\mbox{\tt in}  & {\em c} & c in $ y = a*x^2 + c $ \\
\hline
\mbox{\tt in}  & {\em inputs} & x in $ y = a*x^2 + c $ \\
\hline
\mbox{\tt out}  & {\em outputs} & y in $ y = a*x^2 + c $ \\
\hline
\end{DoxyParams}


Definition at line 51 of file demo\+Evolutionary\+Optimization\+Task.\+cpp.


\begin{DoxyCode}
52 \{
53   \textcolor{comment}{// Compute a*x^2 + c}
54   outputs =  (a*inputs).array().square() + c;
55 \}
\end{DoxyCode}
\hypertarget{demoEvolutionaryOptimizationTask_8cpp_a4c740be97d066078bad8e3997193c673}{\index{demo\+Evolutionary\+Optimization\+Task.\+cpp@{demo\+Evolutionary\+Optimization\+Task.\+cpp}!main@{main}}
\index{main@{main}!demo\+Evolutionary\+Optimization\+Task.\+cpp@{demo\+Evolutionary\+Optimization\+Task.\+cpp}}
\paragraph[{main}]{\setlength{\rightskip}{0pt plus 5cm}int main (
\begin{DoxyParamCaption}
\item[{int}]{n\+\_\+args, }
\item[{char $\ast$}]{args\mbox{[}$\,$\mbox{]}}
\end{DoxyParamCaption}
)}}\label{demoEvolutionaryOptimizationTask_8cpp_a4c740be97d066078bad8e3997193c673}


Main function. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em n\+\_\+args} & Number of arguments \\
\hline
\mbox{\tt in}  & {\em args} & Arguments themselves \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Success of exection. 0 if successful. 
\end{DoxyReturn}


Definition at line 221 of file demo\+Evolutionary\+Optimization\+Task.\+cpp.


\begin{DoxyCode}
222 \{
223   \textcolor{comment}{// If program has an argument, it is a directory to which to save files too (or --help)}
224   \textcolor{keywordtype}{string} directory;
225   \textcolor{keywordtype}{string} covar\_update;
226   \textcolor{keywordflow}{if} (n\_args>1)
227   \{
228     \textcolor{keywordflow}{if} (\textcolor{keywordtype}{string}(args[1]).compare(\textcolor{stringliteral}{"--help"})==0)
229     \{
230       cout << \textcolor{stringliteral}{"Usage: "} << args[0] << \textcolor{stringliteral}{" [directory] [covar\_update]"} << endl;
231       cout << \textcolor{stringliteral}{"                    directory: optional directory to save data to"} << endl;
232       cout << \textcolor{stringliteral}{"                    covar\_update: [none|decay|adaptation]"} << endl;
233       \textcolor{keywordflow}{return} 0;
234     \}
235     \textcolor{keywordflow}{else}
236     \{
237       directory = string(args[1]);
238     \}
239     \textcolor{keywordflow}{if} (n\_args>2)
240     \{
241       covar\_update = string(args[2]);
242     \}
243   \}
244   
245   VectorXd inputs = VectorXd::LinSpaced(21,-1.5,1.5);
246   \textcolor{keywordtype}{double} a = 2.0;
247   \textcolor{keywordtype}{double} c = -1.0;
248   \textcolor{keywordtype}{int} n\_params = 2;
249   
250   \hyperlink{classDmpBbo_1_1Task}{Task}* task = \textcolor{keyword}{new} \hyperlink{classDemoTaskApproximateQuadraticFunction}{DemoTaskApproximateQuadraticFunction}(a,c,inputs)
      ;
251   \hyperlink{classDmpBbo_1_1TaskSolver}{TaskSolver}* task\_solver = \textcolor{keyword}{new} 
      \hyperlink{classDemoTaskSolverApproximateQuadraticFunction}{DemoTaskSolverApproximateQuadraticFunction}(inputs); 
252   
253   VectorXd mean\_init  =  0.5*VectorXd::Ones(n\_params);
254   MatrixXd covar\_init =  0.25*MatrixXd::Identity(n\_params,n\_params);
255   \hyperlink{classDmpBbo_1_1DistributionGaussian}{DistributionGaussian}* distribution = \textcolor{keyword}{new} 
      \hyperlink{classDmpBbo_1_1DistributionGaussian}{DistributionGaussian}(mean\_init, covar\_init); 
256   
257   \hyperlink{classDmpBbo_1_1Updater}{Updater}* updater = NULL;
258   \textcolor{keywordtype}{double} eliteness = 10;
259   \textcolor{keywordtype}{string} weighting\_method = \textcolor{stringliteral}{"PI-BB"};
260     
261   \textcolor{keywordflow}{if} (covar\_update.compare(\textcolor{stringliteral}{"none"})==0)
262   \{
263     updater = \textcolor{keyword}{new} \hyperlink{classDmpBbo_1_1UpdaterMean}{UpdaterMean}(eliteness,weighting\_method);
264   \}
265   \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (covar\_update.compare(\textcolor{stringliteral}{"decay"})==0)
266   \{
267     \textcolor{keywordtype}{double} covar\_decay\_factor = 0.9;
268     updater = \textcolor{keyword}{new} \hyperlink{classDmpBbo_1_1UpdaterCovarDecay}{UpdaterCovarDecay}(eliteness,covar\_decay\_factor,weighting\_method);
269   \}
270   \textcolor{keywordflow}{else} 
271   \{
272     VectorXd base\_level = VectorXd::Constant(n\_params,0.001);
273     eliteness = 10;
274     \textcolor{keywordtype}{bool} diag\_only = \textcolor{keyword}{false};
275     \textcolor{keywordtype}{double} learning\_rate = 0.5;
276     updater = \textcolor{keyword}{new} \hyperlink{classDmpBbo_1_1UpdaterCovarAdaptation}{UpdaterCovarAdaptation}(eliteness,weighting\_method,base\_level,
      diag\_only,learning\_rate);  
277   \}
278 
279   
280   \textcolor{keywordtype}{int} n\_samples\_per\_update = 15;
281   
282   \textcolor{keywordtype}{int} n\_updates = 40;
283 
284   \textcolor{comment}{/*}
285 \textcolor{comment}{  // Here's one way to call it. Below there's another one using ExperimentBBO.}
286 \textcolor{comment}{  cout << "\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_" << endl;}
287 \textcolor{comment}{  cout << "RUNNING OPTIMIZATION" << endl;  }
288 \textcolor{comment}{  runEvolutionaryOptimization(task, task\_solver, distribution, updater, n\_updates, n\_samples\_per\_update);}
289 \textcolor{comment}{  */}
290   
291   \hyperlink{classDmpBbo_1_1ExperimentBBO}{ExperimentBBO} experiment(
292     task,
293     task\_solver,
294     distribution,
295     updater,
296     n\_updates,
297     n\_samples\_per\_update
298   );
299   
300   \textcolor{comment}{//cout << "\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_\_" << endl;}
301   \textcolor{comment}{//cout << "RUNNING SAME OPTIMIZATION (WITH ExperimentBBO)" << endl;  }
302   runEvolutionaryOptimization(task, task\_solver, distribution, updater, n\_updates, n\_samples\_per\_update,
      directory);
303   
304   \textcolor{keywordflow}{return} 0;
305 \}
\end{DoxyCode}
