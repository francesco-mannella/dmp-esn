\hypertarget{classDmpBbo_1_1TimeSystem}{\subsection{Time\+System Class Reference}
\label{classDmpBbo_1_1TimeSystem}\index{Time\+System@{Time\+System}}
}


Dynamical System modelling the evolution of a time\+: $\dot{x} = 1/\tau$.  




{\ttfamily \#include $<$Time\+System.\+hpp$>$}



Inheritance diagram for Time\+System\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=180pt]{classDmpBbo_1_1TimeSystem__inherit__graph}
\end{center}
\end{figure}


Collaboration diagram for Time\+System\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=180pt]{classDmpBbo_1_1TimeSystem__coll__graph}
\end{center}
\end{figure}
\subsubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\hyperlink{classDmpBbo_1_1TimeSystem_a54efa9f53ff3d908c1b401b8b7e74ef2}{Time\+System} (double \hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}, bool \hyperlink{classDmpBbo_1_1TimeSystem_acb6f561fe702566189e7b5ef7f2d9bca}{count\+\_\+down}=false, std\+::string \hyperlink{group__DynamicalSystems_gacd23346c798f78014a4f82c853e83c88}{name}=\char`\"{}Time\+System\char`\"{})
\begin{DoxyCompactList}\small\item\em Initialization constructor. \end{DoxyCompactList}\item 
\hyperlink{classDmpBbo_1_1TimeSystem_a6eb633f00bc3c52520e10a3564ef7d9f}{$\sim$\+Time\+System} (void)
\begin{DoxyCompactList}\small\item\em Destructor. \end{DoxyCompactList}\item 
\hyperlink{classDmpBbo_1_1DynamicalSystem}{Dynamical\+System} $\ast$ \hyperlink{classDmpBbo_1_1TimeSystem_a16b3e8da712b58f8295cbb7951bebf68}{clone} (void) const 
\begin{DoxyCompactList}\small\item\em Return a pointer to a deep copy of the \hyperlink{classDmpBbo_1_1DynamicalSystem}{Dynamical\+System} object. \end{DoxyCompactList}\item 
void \hyperlink{classDmpBbo_1_1TimeSystem_ab564468764e7e4dc7c11e2a786e22c19}{differential\+Equation} (const Eigen\+::\+Vector\+Xd \&x, Eigen\+::\+Ref$<$ Eigen\+::\+Vector\+Xd $>$ xd) const 
\begin{DoxyCompactList}\small\item\em The differential equation which defines the system. \end{DoxyCompactList}\item 
void \hyperlink{classDmpBbo_1_1TimeSystem_ab6600b58b35bc9e66673d16f68e2e919}{analytical\+Solution} (const Eigen\+::\+Vector\+Xd \&ts, Eigen\+::\+Matrix\+Xd \&xs, Eigen\+::\+Matrix\+Xd \&xds) const 
\begin{DoxyCompactList}\small\item\em Return analytical solution of the system at certain times. \end{DoxyCompactList}\item 
std\+::string \hyperlink{classDmpBbo_1_1TimeSystem_a1aca816b42cf0d36118be0ab91120d77}{to\+String} (void) const 
\begin{DoxyCompactList}\small\item\em Returns a string representation of the object. \end{DoxyCompactList}\item 
bool \hyperlink{classDmpBbo_1_1TimeSystem_acb6f561fe702566189e7b5ef7f2d9bca}{count\+\_\+down} (void) const 
\begin{DoxyCompactList}\small\item\em Accessor function for count\+\_\+down. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsubsection*{Friends}
\begin{DoxyCompactItemize}
\item 
class \hyperlink{classDmpBbo_1_1TimeSystem_ac98d07dd8f7b70e16ccb9a01abf56b9c}{boost\+::serialization\+::access}
\begin{DoxyCompactList}\small\item\em Give boost serialization access to private members. \end{DoxyCompactList}\end{DoxyCompactItemize}
\subsubsection*{Additional Inherited Members}


\subsubsection{Detailed Description}
Dynamical System modelling the evolution of a time\+: $\dot{x} = 1/\tau$. 

In this system, time is modeled as a 1-\/\+D variable that increases with a constant velocity. As with time, the system starts at 0. However, whereas time increases with 1s/s the system increases with (1/tau)/s. Once the system goes above tau, velocities are 0. This system can also model a countdown timer. In this case, the system starts at 1, decreases with velocity -\/1/tau, and stops decreasing when the system drops below 0. 

Definition at line 40 of file Time\+System.\+hpp.



\subsubsection{Constructor \& Destructor Documentation}
\hypertarget{classDmpBbo_1_1TimeSystem_a54efa9f53ff3d908c1b401b8b7e74ef2}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!Time\+System@{Time\+System}}
\index{Time\+System@{Time\+System}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{Time\+System}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Time\+System} (
\begin{DoxyParamCaption}
\item[{double}]{tau, }
\item[{bool}]{count\+\_\+down = {\ttfamily false}, }
\item[{std\+::string}]{name = {\ttfamily \char`\"{}TimeSystem\char`\"{}}}
\end{DoxyParamCaption}
)}}\label{classDmpBbo_1_1TimeSystem_a54efa9f53ff3d908c1b401b8b7e74ef2}


Initialization constructor. 


\begin{DoxyParams}{Parameters}
{\em tau} & Time constant, cf. \hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{Dynamical\+System\+::tau()} \\
\hline
{\em count\+\_\+down} & Whether timer increases (false) or decreases (true) \\
\hline
{\em name} & Name for the sytem, cf. \hyperlink{group__DynamicalSystems_gacd23346c798f78014a4f82c853e83c88}{Dynamical\+System\+::name()} \\
\hline
\end{DoxyParams}


Definition at line 46 of file Time\+System.\+cpp.


\begin{DoxyCode}
47 : 
48   \hyperlink{classDmpBbo_1_1DynamicalSystem_a2619319384507480c48e61850037a461}{DynamicalSystem}(1, \hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}, VectorXd::Zero(1), VectorXd::Ones(1), 
      \hyperlink{group__DynamicalSystems_gacd23346c798f78014a4f82c853e83c88}{name}),
49   count\_down\_(\hyperlink{classDmpBbo_1_1TimeSystem_acb6f561fe702566189e7b5ef7f2d9bca}{count\_down})
50 \{
51   \textcolor{keywordflow}{if} (count\_down\_)
52   \{
53     \hyperlink{group__DynamicalSystems_ga23f05bcccb6a5deda6d2a5364d8ebb16}{set\_initial\_state}(VectorXd::Ones(1));
54     \hyperlink{group__DynamicalSystems_ga32a975e60b5f001308368c7f06b90e18}{set\_attractor\_state}(VectorXd::Zero(1));
55   \}
56 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classDmpBbo_1_1TimeSystem_a54efa9f53ff3d908c1b401b8b7e74ef2_cgraph}
\end{center}
\end{figure}


\hypertarget{classDmpBbo_1_1TimeSystem_a6eb633f00bc3c52520e10a3564ef7d9f}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!````~Time\+System@{$\sim$\+Time\+System}}
\index{````~Time\+System@{$\sim$\+Time\+System}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{$\sim$\+Time\+System}]{\setlength{\rightskip}{0pt plus 5cm}$\sim${\bf Time\+System} (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
)}}\label{classDmpBbo_1_1TimeSystem_a6eb633f00bc3c52520e10a3564ef7d9f}


Destructor. 



Definition at line 58 of file Time\+System.\+cpp.


\begin{DoxyCode}
59 \{
60 \}
\end{DoxyCode}


\subsubsection{Member Function Documentation}
\hypertarget{classDmpBbo_1_1TimeSystem_a16b3e8da712b58f8295cbb7951bebf68}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!clone@{clone}}
\index{clone@{clone}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{clone}]{\setlength{\rightskip}{0pt plus 5cm}{\bf Dynamical\+System} $\ast$ clone (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classDmpBbo_1_1TimeSystem_a16b3e8da712b58f8295cbb7951bebf68}


Return a pointer to a deep copy of the \hyperlink{classDmpBbo_1_1DynamicalSystem}{Dynamical\+System} object. 

\begin{DoxyReturn}{Returns}
Pointer to a deep copy 
\end{DoxyReturn}


Implements \hyperlink{classDmpBbo_1_1DynamicalSystem_a8f7224307c260c899631afd44e4717a0}{Dynamical\+System}.



Definition at line 62 of file Time\+System.\+cpp.


\begin{DoxyCode}
63 \{
64   \textcolor{keywordflow}{return} \textcolor{keyword}{new} \hyperlink{classDmpBbo_1_1TimeSystem_a54efa9f53ff3d908c1b401b8b7e74ef2}{TimeSystem}(\hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}(),\hyperlink{classDmpBbo_1_1TimeSystem_acb6f561fe702566189e7b5ef7f2d9bca}{count\_down}(),\hyperlink{group__DynamicalSystems_gacd23346c798f78014a4f82c853e83c88}{name}());
65 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=321pt]{classDmpBbo_1_1TimeSystem_a16b3e8da712b58f8295cbb7951bebf68_cgraph}
\end{center}
\end{figure}


\hypertarget{classDmpBbo_1_1TimeSystem_ab564468764e7e4dc7c11e2a786e22c19}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!differential\+Equation@{differential\+Equation}}
\index{differential\+Equation@{differential\+Equation}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{differential\+Equation}]{\setlength{\rightskip}{0pt plus 5cm}void differential\+Equation (
\begin{DoxyParamCaption}
\item[{const Eigen\+::\+Vector\+Xd \&}]{x, }
\item[{Eigen\+::\+Ref$<$ Eigen\+::\+Vector\+Xd $>$}]{xd}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classDmpBbo_1_1TimeSystem_ab564468764e7e4dc7c11e2a786e22c19}


The differential equation which defines the system. 

It relates state values to rates of change of those state values


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em x} & current state (column vector of size \hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim()} X 1) \\
\hline
\mbox{\tt out}  & {\em xd} & rate of change in state (column vector of size \hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim()} X 1)\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
x and xd should be of size \hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim()} X 1. This forces you to pre-\/allocate memory, which speeds things up (and also makes Eigen's Ref functionality easier to deal with). 
\end{DoxyRemark}


Implements \hyperlink{classDmpBbo_1_1DynamicalSystem_a70acc98a8e024f9b6e0e6de1b519e260}{Dynamical\+System}.



Definition at line 67 of file Time\+System.\+cpp.


\begin{DoxyCode}
68 \{
69   \textcolor{comment}{// if state<1: xd = 1/obj.tau   (or for count\_down=true, if state>0: xd = -1/obj.tau}
70   \textcolor{comment}{// else        xd = 0}
71   xd = VectorXd::Zero(1);
72   \textcolor{keywordflow}{if} (count\_down\_)
73   \{
74     \textcolor{keywordflow}{if} (x[0]>0)
75       xd[0] = -1.0/\hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}();
76   \}
77   \textcolor{keywordflow}{else}
78   \{
79     \textcolor{keywordflow}{if} (x[0]<1)
80       xd[0] = 1.0/\hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}();
81   \}
82 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classDmpBbo_1_1TimeSystem_ab564468764e7e4dc7c11e2a786e22c19_cgraph}
\end{center}
\end{figure}


\hypertarget{classDmpBbo_1_1TimeSystem_ab6600b58b35bc9e66673d16f68e2e919}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!analytical\+Solution@{analytical\+Solution}}
\index{analytical\+Solution@{analytical\+Solution}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{analytical\+Solution}]{\setlength{\rightskip}{0pt plus 5cm}void analytical\+Solution (
\begin{DoxyParamCaption}
\item[{const Eigen\+::\+Vector\+Xd \&}]{ts, }
\item[{Eigen\+::\+Matrix\+Xd \&}]{xs, }
\item[{Eigen\+::\+Matrix\+Xd \&}]{xds}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classDmpBbo_1_1TimeSystem_ab6600b58b35bc9e66673d16f68e2e919}


Return analytical solution of the system at certain times. 


\begin{DoxyParams}[1]{Parameters}
\mbox{\tt in}  & {\em ts} & A vector of times for which to compute the analytical solutions \\
\hline
\mbox{\tt out}  & {\em xs} & Sequence of state vectors. T x D or D x T matrix, where T is the number of times (the length of 'ts'), and D the size of the state (i.\+e. \hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim()}) \\
\hline
\mbox{\tt out}  & {\em xds} & Sequence of state vectors (rates of change). T x D or D x T matrix, where T is the number of times (the length of 'ts'), and D the size of the state (i.\+e. \hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim()})\\
\hline
\end{DoxyParams}
\begin{DoxyRemark}{Remarks}
The output xs and xds will be of size D x T {\itshape only} if the matrix x you pass as an argument of size D x T. In all other cases (i.\+e. including passing an empty matrix) the size of x will be T x D. This feature has been added so that you may pass matrices of either size. 
\end{DoxyRemark}


Implements \hyperlink{classDmpBbo_1_1DynamicalSystem_ab6092038efc51ebd122e7c0878f6557d}{Dynamical\+System}.



Definition at line 84 of file Time\+System.\+cpp.


\begin{DoxyCode}
85 \{
86   \textcolor{keywordtype}{int} T = ts.size();
87   assert(T>0);
88 
89   \textcolor{comment}{// Usually, we expect xs and xds to be of size T X dim(), so we resize to that. However, if the}
90   \textcolor{comment}{// input matrices were of size dim() X T, we return the matrices of that size by doing a }
91   \textcolor{comment}{// transposeInPlace at the end. That way, the user can also request dim() X T sized matrices.}
92   \textcolor{keywordtype}{bool} caller\_expects\_transposed = (xs.rows()==\hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim}() && xs.cols()==T);
93 
94   \textcolor{comment}{// Prepare output arguments to be of right size (Eigen does nothing if already the right size)}
95   xs.resize(T,\hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim}());
96   xds.resize(T,\hyperlink{group__DynamicalSystems_ga6f628f7f4ed9d77bf69f5b8560b98f18}{dim}());
97   
98   \textcolor{comment}{// Find first index at which the time is larger than tau. Then velocities should be set to zero.}
99   \textcolor{keywordtype}{int} velocity\_stop\_index = -1;
100   \textcolor{keywordtype}{int} i=0;
101   \textcolor{keywordflow}{while} (velocity\_stop\_index<0 && i<ts.size())
102     \textcolor{keywordflow}{if} (ts[i++]>\hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}())
103       velocity\_stop\_index = i-1;
104     
105   \textcolor{keywordflow}{if} (velocity\_stop\_index<0)
106     velocity\_stop\_index = ts.size();
107 
108   \textcolor{keywordflow}{if} (count\_down\_)
109   \{
110     xs.topRows(velocity\_stop\_index) = (-ts.segment(0,velocity\_stop\_index).array()/
      \hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}()).array()+1.0;
111     xs.bottomRows(xs.size()-velocity\_stop\_index).fill(0.0);
112   
113     xds.topRows(velocity\_stop\_index).fill(-1.0/\hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}());
114     xds.bottomRows(xds.size()-velocity\_stop\_index).fill(0.0);
115   \}
116   \textcolor{keywordflow}{else}
117   \{
118     xs.topRows(velocity\_stop\_index) = ts.segment(0,velocity\_stop\_index).array()/
      \hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}();
119     xs.bottomRows(xs.size()-velocity\_stop\_index).fill(1.0);
120   
121     xds.topRows(velocity\_stop\_index).fill(1.0/\hyperlink{group__DynamicalSystems_ga50eec7ad4c9664b5809ace45b22200d5}{tau}());
122     xds.bottomRows(xds.size()-velocity\_stop\_index).fill(0.0);
123   \}
124   
125   \textcolor{keywordflow}{if} (caller\_expects\_transposed)
126   \{
127     xs.transposeInPlace();
128     xds.transposeInPlace();
129   \}
130 \}
\end{DoxyCode}


Here is the call graph for this function\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{classDmpBbo_1_1TimeSystem_ab6600b58b35bc9e66673d16f68e2e919_cgraph}
\end{center}
\end{figure}


\hypertarget{classDmpBbo_1_1TimeSystem_a1aca816b42cf0d36118be0ab91120d77}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!to\+String@{to\+String}}
\index{to\+String@{to\+String}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{to\+String}]{\setlength{\rightskip}{0pt plus 5cm}string to\+String (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [virtual]}}}\label{classDmpBbo_1_1TimeSystem_a1aca816b42cf0d36118be0ab91120d77}


Returns a string representation of the object. 

\begin{DoxyReturn}{Returns}
A string representation of the object. 
\end{DoxyReturn}


Implements \hyperlink{classDmpBbo_1_1DynamicalSystem_af084bff2ddd6233e9a898faa23f6195c}{Dynamical\+System}.



Definition at line 141 of file Time\+System.\+cpp.


\begin{DoxyCode}
142 \{
143   \hyperlink{BoostSerializationToString_8hpp_a244fa2647b6577d9be517958dccbb5e8}{RETURN\_STRING\_FROM\_BOOST\_SERIALIZATION\_XML}(\textcolor{stringliteral}{"TimeSystem"});
144 \}
\end{DoxyCode}
\hypertarget{classDmpBbo_1_1TimeSystem_acb6f561fe702566189e7b5ef7f2d9bca}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!count\+\_\+down@{count\+\_\+down}}
\index{count\+\_\+down@{count\+\_\+down}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{count\+\_\+down}]{\setlength{\rightskip}{0pt plus 5cm}bool count\+\_\+down (
\begin{DoxyParamCaption}
\item[{void}]{}
\end{DoxyParamCaption}
) const\hspace{0.3cm}{\ttfamily [inline]}}}\label{classDmpBbo_1_1TimeSystem_acb6f561fe702566189e7b5ef7f2d9bca}


Accessor function for count\+\_\+down. 

\begin{DoxyReturn}{Returns}
Whether timer increases (false) or decreases (true) 
\end{DoxyReturn}


Definition at line 66 of file Time\+System.\+hpp.


\begin{DoxyCode}
67   \{
68     \textcolor{keywordflow}{return} count\_down\_;
69   \}
\end{DoxyCode}


\subsubsection{Friends And Related Function Documentation}
\hypertarget{classDmpBbo_1_1TimeSystem_ac98d07dd8f7b70e16ccb9a01abf56b9c}{\index{Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}!boost\+::serialization\+::access@{boost\+::serialization\+::access}}
\index{boost\+::serialization\+::access@{boost\+::serialization\+::access}!Dmp\+Bbo\+::\+Time\+System@{Dmp\+Bbo\+::\+Time\+System}}
\paragraph[{boost\+::serialization\+::access}]{\setlength{\rightskip}{0pt plus 5cm}friend class boost\+::serialization\+::access\hspace{0.3cm}{\ttfamily [friend]}}}\label{classDmpBbo_1_1TimeSystem_ac98d07dd8f7b70e16ccb9a01abf56b9c}


Give boost serialization access to private members. 



Definition at line 78 of file Time\+System.\+hpp.



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
\hyperlink{TimeSystem_8hpp}{Time\+System.\+hpp}\item 
\hyperlink{TimeSystem_8cpp}{Time\+System.\+cpp}\end{DoxyCompactItemize}
